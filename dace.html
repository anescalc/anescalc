<!-- <%@ language="javascript"%> -->
<!DOCTYPE html>
<html lang="en-150">
	
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/superhero/bootstrap.min.css" media="all"> <!--bootswatch-->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> <!--google icons-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!--font awesome 20px-sm-->	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-104312945-2', 'auto');
	  ga('send', 'pageview');
	</script>
	
	<script>
		$(document).ready(function(){ 
			$('#myTab li:eq(1) a').tab('show');
			});
	</script>
		
	<script>
		var pointmatrix = {
		 "Points": [
		     -1,
		     0,
		     1,
		     2,
		     3,
		     4,
		     5,
		     6,
		     7,
		     8,
		     9,
		    10,
		    11,
		    12,
		    13,
		    14,
		    15,
		    16,
		    17,
		    18,
		    19,
		    20,
		    21,
		    22,
		    23,
		    24,
		    25 
		],
		"CIF 1 year": [
		   0.03,
		  0.03,
		  0.04,
		  0.05,
		  0.06,
		  0.07,
		  0.08,
		  0.09,
		  0.11,
		  0.13,
		  0.15,
		  0.17,
		   0.2,
		  0.23,
		  0.27,
		  0.31,
		  0.36,
		  0.41,
		  0.46,
		  0.52,
		  0.58,
		  0.64,
		   0.7,
		  0.76,
		  0.82,
		  0.87,
		  0.91 
		],
		"CIF 2 year": [
		   0.04,
		  0.05,
		  0.06,
		  0.07,
		  0.08,
		   0.1,
		  0.12,
		  0.14,
		  0.16,
		  0.19,
		  0.22,
		  0.25,
		  0.29,
		  0.33,
		  0.38,
		  0.44,
		  0.49,
		  0.55,
		  0.61,
		  0.68,
		  0.74,
		   0.8,
		  0.85,
		  0.89,
		  0.93,
		  0.96,
		  0.98 
		],
		"CIF 3 year": [
		   0.06,
		  0.07,
		  0.08,
		  0.09,
		  0.11,
		  0.13,
		  0.15,
		  0.17,
		   0.2,
		  0.24,
		  0.27,
		  0.32,
		  0.36,
		  0.41,
		  0.47,
		  0.53,
		  0.59,
		  0.65,
		  0.71,
		  0.77,
		  0.83,
		  0.87,
		  0.91,
		  0.94,
		  0.97,
		  0.98,
		  0.99 
		],
		"CIF 4 year": [
		   0.07,
		  0.08,
		   0.1,
		  0.11,
		  0.13,
		  0.16,
		  0.18,
		  0.21,
		  0.24,
		  0.28,
		  0.33,
		  0.37,
		  0.43,
		  0.48,
		  0.54,
		   0.6,
		  0.66,
		  0.73,
		  0.78,
		  0.84,
		  0.88,
		  0.92,
		  0.95,
		  0.97,
		  0.99,
		  0.99,
		     1 
		],
		"CIF 5 year": [
		   0.08,
		  0.09,
		  0.11,
		  0.13,
		  0.15,
		  0.18,
		  0.21,
		  0.24,
		  0.28,
		  0.32,
		  0.37,
		  0.42,
		  0.47,
		  0.53,
		  0.59,
		  0.66,
		  0.72,
		  0.78,
		  0.83,
		  0.88,
		  0.92,
		  0.95,
		  0.97,
		  0.98,
		  0.99,
		     1,
		     1 
		] 
		}
		
		var o1year = "CIF 1 year";
		var mort1year = pointmatrix[o1year];
		var o2year = "CIF 2 year";
		var mort2year = pointmatrix[o2year];
		var o3year = "CIF 3 year";
		var mort3year = pointmatrix[o3year];
		var o4year = "CIF 4 year";
		var mort4year = pointmatrix[o4year];
		var o5year = "CIF 5 year";
		var mort5year = pointmatrix[o5year];
				
		function totalDACE() {
			// POINTS			
			var age = parseFloat(document.getElementById("age").value); 
			var gen = parseFloat(document.getElementById("gender").value);
			var hta = parseFloat(document.getElementById("hyperta").value);
			var lvef = parseFloat(document.getElementById("lvef").value); 
			var artdis = parseFloat(document.getElementById("artdisease").value); 
			var chf = parseFloat(document.getElementById("chfailure").value); 
			var ckd = parseFloat(document.getElementById("ckd").value); 
			var killp = parseFloat(document.getElementById("killipclass").value); 
			
			pointage = ((age-20)/5);
			floorage = Math.floor(pointage);
			totDACE = floorage - gen + hta + lvef + artdis + chf + ckd + killp;			
			document.getElementById("totDACE").innerHTML = totDACE;
			
			// lookup mortality data
			var totDACElookup = totDACE + 1; // correct lookup index because first element is -1 and must be 0			
			var number1year = Math.round(  mort1year[totDACElookup] *100  );			
			document.getElementById("totMort1year").innerHTML = number1year + " %";
			var number2year = Math.round(  mort2year[totDACElookup] *100  );			
			document.getElementById("totMort2year").innerHTML = number2year + " %";			
			var number3year = Math.round(  mort3year[totDACElookup] *100  );			
			document.getElementById("totMort3year").innerHTML = number3year + " %";
			var number4year = Math.round(  mort4year[totDACElookup] *100  );			
			document.getElementById("totMort4year").innerHTML = number4year + " %";
			var number5year = Math.round(  mort5year[totDACElookup] *100  );			
			document.getElementById("totMort5year").innerHTML = number5year + " %";
			
			
			// setup bar lengths
			//$('.progress1year').val(number1year); //value is for <progress> tags
			$('.progress1year').width(number1year + '%'); //translate width from px to percent
			$('.progress2year').width(number2year + '%');
			$('.progress3year').width(number3year + '%');
			$('.progress4year').width(number4year + '%');
			$('.progress5year').width(number5year + '%');
		}	
		

		
		$(".progress-bar").animate({
		    width: "70%"
		}, 2500);
			
	</script>	
			
	<style>
		.input-lg {
		  font-size: 30px;
		}
		.input {
		  font-size: 20px;
		}
		.font-sm {
			font-size: 0.7em;
		}
		/*.alert-gray{
			background-color: #1d4249;
			color: #ffffff;
			border-color: #1d4249;
			} green gray*/
		.alert-gray{
				background-color: #48586a;
				color: #ffffff;
				border-color: #48586a;
			}
		.alert-blue1{
			background-color: #6995b0;
			color: #ffffff;
			border-color: #6995b0;
			}
		.alert-protein{
			background-color: #cc7a00;
			color: #ffffff;
			border-color: #cc7a00;
			}
		.alert-protein > .form-group > .form-control {
			background-color: #fff5e6;
			color:  #995c00;
			border-color:  #cc7a00;
			}
		.alert-glucose{
			background-color: #79b530;
			color: #ffffff;
			border-color: #79b530;
			}
		.alert-glucose > .form-group > .form-control {
			background-color: #e7f4d7;
			color:  #43651b;
			border-color:  #79b530;
			}
		.alert-lipids{
			background-color: #e6bb00;
			color: #ffffff;
			border-color: #e6bb00;
			}
		.alert-lipids > .form-group > .form-control {
			background-color: #fff6cc;
			color: #997d00;
			border-color: #e6bb00;
			}
		.alert-vitamin{
			background-color: #388293; /*#2e6976*/
			color: #ffffff;
			border-color: #388293;
			}
		.alert-vitamin > .form-group > .form-control {
			background-color: #daedf1; 
			color: #1c424a;
			border-color: #388293;
			}
		.alert-ions{
			background-color: #70adbc;
			color: #ffffff;
			border-color: #70adbc;
			}
		.alert-ions > .form-group > .form-control {
			background-color: #dcebef;
			color: #315d68;
			border-color: #70adbc;
			}
		.alert-ions-inline{ /* overrides css overriding in ions button well*/
			background-color: #dcebef;
			color: #315d68;
			border-color: #70adbc;
			}
		.alert-danger{
			background-color: #b62f2f; /*#c73859; #e03e55*/
			color: #ffffff;
			border-color: #b62f2f;
			}
		.nav-tabs > li > a{
			color: #84a5ae;
		}
		.btn-danger:hover {
			border-radius: 20px;
			background-color: #b62f2f;
			color: #48586a;
		}
		
		@media print {
			.noPrint {
			       display:none;
				   }
			}	
		
		
		/* progress bars */
		.progress {
		    height: 40px;			
		    /*
			margin-bottom: 20px;
		    overflow: hidden;
		    background-color: #48586a !important;
		    border-radius: 4px;
		    box-shadow: none;
			*/
		}
		.progress-bar .bg-info{
			background-color: #48586a
		}
		
		.progress-label {
		    float: left;
			margin-left: 1em;
		    margin-right: 1em;
		}
	   
	</style>		
			
			
			
	<title>DACE Score</title>
</head>


<body>

<div id="intro" class="container-fluid">
	<div class="row">
		<div class="col-sm-12 col-md-12 text-center">
			<h1> DACE Score &nbsp;<span class="fa fa-heartbeat "></a></span></h1>
			<h4> MACE cumulative incidence for Diabetic Patients post-MI </h4>
			
<!--		  	<div class="row">
<!--				<div class="col-sm-5 col-md-5 col-xs-4 text-center">
<!--				</div> <!--EOF column-->
<!--				<div class="col-sm-1 col-md-1 col-xs-2 text-center">
<!--					<h4><a id="nutritionLink" href="./nutricion_calc.html" target="blank"><img class="img-responsive button" src="./pics/gray-spain.png" alt="spanish" onclick="changeLangEs()"></a></h4> 
<!--				</div> <!--EOF column-->
<!--				<div class="col-sm-1 col-md-1 col-xs-2 text-center">
<!--					<h4><a id="nutritionLink" href="./nutrition_calc.html" target="blank"><img class="img-responsive button" src="./pics/gray-uk.png" alt="english" onclick="changeLangEn()"></a></h4> 
<!--				</div> <!--EOF column-->
<!--				<div class="col-sm-5 col-md-5 col-xs-4 text-center">
<!--				</div> <!--EOF column-->
<!--			</div> <!--EOF row  https://bootsnipp.com/snippets/featured/circle-progress-bar  moving-bar http://jsfiddle.net/WEYKL/1/   color-changin bar https://codepen.io/whqet/pen/hfDzp-->  
		
			<hr>
		</div> <!--EOF column-->
	</div> <!--EOF row-->
</div> <!--EOF container-->

<div id="miDACE" class="container-fluid">
	<div class="row">
		<div class="col-sm-12 col-md-6 text-center">
			<div class="button well" onclick="totalDACE()">
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>&nbsp;&nbsp;Age</span>
						<input class="form-control input" type="number" id="age" name="edad" value="50" min="20" max="95" step="1" placeholder="Age">
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;Gender</span>
						<select class="form-control input" id="gender" name="sexo">
							<option value="0" selected="selected">Male</option>
							<option value="1">Female</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-dashboard"></span>&nbsp;&nbsp;Hypertension</span>
						<select class="form-control input" id="hyperta" name="hipertension">
							<option value="0" selected="selected">No</option>
							<option value="1">Yes</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-signal"></span>&nbsp;&nbsp;LVEF</span>
						<select class="form-control input" id="lvef" name="fevi">
							<option value="0" selected="selected"> >51%</option>
							<option value="1"> 41-51%</option>
							<option value="1"> 31-40%</option>
							<option value="2"> &le;30%</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->
				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-road"></span>&nbsp;&nbsp;Peripheral artery disease</span>
						<select class="form-control input" id="artdisease" name="enfarterial">
							<option value="0" selected="selected">No</option>
							<option value="1">Yes</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->
				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-heart"></span>&nbsp;&nbsp;Previous CHF</span>
						<select class="form-control input" id="chfailure" name="iccongestiva">
							<option value="0" selected="selected">No</option>
							<option value="1">Yes</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->
				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-filter"></span>&nbsp;&nbsp;Chronic kidney disease</span>
						<select class="form-control input" id="ckd" name="irc">
							<option value="0" selected="selected">No</option>
							<option value="1">Yes</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->
				
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-addon"><span class="glyphicon glyphicon-signal"></span>&nbsp;&nbsp;Killip class</span>
						<select class="form-control input" id="killipclass" name="killipclase">
							<option value="0" selected="selected"> I (no CHF)</option>
							<option value="1"> II (rales and/or JVD)</option>
							<option value="2"> III (pulmonary edema)</option>
							<option value="4"> IV (cardiogenic shock)</option>
						</select>
					</div><!--EOF input-group-->
				</div> <!--EOF form-group-->
				
			</div> <!--EOF well sm-->
		</div> <!--EOF column-->
		
		
		<!--RESULTS COLUMN -->
		
		<div class="col-sm-12 col-md-6 text-center">
			<div id="cabecera" class="container-fluid">
				<div class="row">
					<div class="col-sm-12 col-md-12 text-center">
						<div class="button well well-sm alert-gray" onclick="totalDACE()">
							<h2> Points = <span id="totDACE"> </span> <span id=""> </span></h2>
						</div> <!--EOF well sm-->
					</div> <!--EOF column-->
				</div> <!--EOF row-->
				<hr>
				
				
				<!--progress bars -->
				<div class="row">
					<div class="col-sm-12 col-md-12 text-center">
						<div class="progress">
							<h5 class="progress-label">1-year incidence</h5>
							<div class="progress-bar bg-info progress1year" role="progressbar" style="width: 5%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
								<span id="totMort1year"> </span>
							</div>
						</div>	
					</div> <!--EOF column-->
				</div> <!--EOF row-->
				<div class="row">
					<div class="col-sm-12 col-md-12 text-center">
						<div class="progress">
							<h5 class="progress-label">2-year incidence</h5>
							<div class="progress-bar bg-info progress2year" role="progressbar" style="width: 5%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
								<span id="totMort2year"> </span>
							</div>
						</div>		
					</div> <!--EOF column-->
				</div> <!--EOF row-->
				<div class="row">
					<div class="col-sm-12 col-md-12 text-center">
						<div class="progress">
							<h5 class="progress-label">3-year incidence</h5>
							<div class="progress-bar bg-info progress3year" role="progressbar" style="width: 5%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
								<span id="totMort3year"> </span>
							</div>
						</div>				
					</div> <!--EOF column-->
				</div> <!--EOF row-->
				<div class="row">
					<div class="col-sm-12 col-md-12 text-center">
						<div class="progress">
							<h5 class="progress-label">4-year incidence</h5>
							<div class="progress-bar bg-info progress4year" role="progressbar" style="width: 5%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
								<span id="totMort4year"> </span>
							</div>
						</div>					
					</div> <!--EOF column-->
				</div> <!--EOF row-->
				<div class="row">
					<div class="col-sm-12 col-md-12 text-center">
						<div class="progress">
							<h5 class="progress-label">5-year incidence</h5>
							<div class="progress-bar bg-info progress5year" role="progressbar" style="width: 5%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">
								<span id="totMort5year"> </span>
							</div>
						</div>				
					</div> <!--EOF column-->
				</div> <!--EOF row-->
				

				
				
<!--				<div class="row">
<!--					<progress class="progress progress1year" value="10" max="100"></progress>
<!--				</div> <!--EOF row-->
<!--				<div class="row">
<!--					<progress class="progress progress2year" value="10" max="100"></progress>
<!--				</div> <!--EOF row-->
<!--				<div class="row">
<!--					<progress class="progress progress3year" value="10" max="100"></progress>
<!--				</div> <!--EOF row-->
<!--				<div class="row">
<!--					<progress class="progress progress4year" value="10" max="100"></progress>
<!--				</div> <!--EOF row-->
<!--				<div class="row">
<!--					<progress class="progress progress5year" value="10" max="100"></progress>
<!--				</div> <!--EOF row-->

			
			</div> <!--EOF container-->
			
		</div> <!--EOF column-->
		
		
	</div> <!--EOF row-->
</div> <!--EOF container-->




<div id="contact" class="container-fluid noPrint">
	<div class="row">
		<div class="col-sm-12 col-md-12 text-center">
			<h2> Author</h2>
			<div class="well well-sm well-sm">
				<p><span class="fa fa-user-md"></span> Aurora Baluja-Gonz&aacute;lez, &nbsp;&nbsp;Mois&eacute;s Rodr&iacute;guez-Ma&ntilde;ero</p>
	        	<p><span class="fa fa-hospital-o"></span> Servicio de Anestesiolog&iacute;a y Reanimaci&oacute;n, Servicio de Cardiolog&iacute;a. </p>
	        	<p><span class="glyphicon glyphicon-map-marker"></span> Hospital Cl&iacute;nico Universitario. Santiago de Compostela, Espa&ntilde;a</p>
			</div> <!--EOF well-sm-->
			<p><h3><a href="https://github.com/aurora-mareviv/anescalc" target="blank" style="color:#48586a"><span class="fa fa-github"></a>&nbsp;</span>
			   <a href="https://talesofr.wordpress.com" target="blank" style="color:#48586a"><span class="fa fa-rss"></a></span>
			   <a href="https://twitter.com/maureviv" target="blank" style="color:#48586a"><span class="fa fa-twitter"></a></span>
			   </h3>
		   	</p>
		</div> <!--EOF column-->
	</div> <!--EOF row-->
</div> <!--EOF container-->

<div id="license" class="container-fluid">
	<div class="row">
		<div class="col-sm-12 col-md-12">
			<h3> </h3>
			<hr>
			<p style="color:#bfbfbf"><span class="fa fa-linux" style="color:#bfbfbf"></span> 
				Licencia - <a href="https://github.com/aurora-mareviv" target="blank" style="color:#bfbfbf">C&oacute;digo</a>: GNU-GPL v3. 
				<a href="http://getbootstrap.com/" target="blank" style="color:#bfbfbf">Bootstrap CSS</a>, 
				<a href="https://bootswatch.com/" target="blank" style="color:#bfbfbf">Bootswatch</a>: MIT.
			</p>
		</div> <!--EOF column-->
	</div> <!--EOF row-->
</div> <!--EOF container-->


</body>	
</html>
